<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Soil Farming Agent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'earth-brown': '#8B4513',
                        'soil-brown': '#A0522D',
                        'leaf-green': '#6B8E23',
                        'sage-green': '#9CAF88',
                        'cream': '#F5F5DC',
                        'light-green': '#E8F5E8'
                    }
                }
            }
        }
    </script>
</head>

<body class="min-h-screen relative overflow-hidden">
    <!-- Animated Background -->
    <div class="absolute inset-0 bg-gradient-to-br from-sage-green via-light-green to-cream">
        <!-- Animated farming elements -->
        <div class="absolute inset-0">
            <!-- Floating particles -->
            <div class="absolute top-20 left-10 w-2 h-2 bg-leaf-green rounded-full opacity-60 animate-bounce"
                style="animation-delay: 0s;"></div>
            <div class="absolute top-40 right-20 w-1 h-1 bg-earth-brown rounded-full opacity-40 animate-bounce"
                style="animation-delay: 1s;"></div>
            <div class="absolute bottom-32 left-1/4 w-1.5 h-1.5 bg-leaf-green rounded-full opacity-50 animate-bounce"
                style="animation-delay: 2s;"></div>

            <!-- Background farming illustration -->
            <svg class="absolute bottom-0 left-0 w-full h-64 opacity-20" viewBox="0 0 1200 300" fill="none"
                preserveAspectRatio="none">
                <!-- Ground layers -->
                <path d="M0 200 Q300 180 600 200 T1200 200 L1200 300 L0 300 Z" fill="#A0522D" />
                <path d="M0 220 Q400 200 800 220 T1200 220 L1200 300 L0 300 Z" fill="#8B4513" />
                <path d="M0 250 Q200 240 600 250 T1200 250 L1200 300 L0 300 Z" fill="#654321" />

                <!-- Crops scattered across -->
                <g fill="#6B8E23">
                    <rect x="100" y="160" width="4" height="40" rx="2" />
                    <rect x="200" y="170" width="4" height="30" rx="2" />
                    <rect x="350" y="165" width="4" height="35" rx="2" />
                    <rect x="500" y="155" width="4" height="45" rx="2" />
                    <rect x="650" y="175" width="4" height="25" rx="2" />
                    <rect x="800" y="160" width="4" height="40" rx="2" />
                    <rect x="950" y="170" width="4" height="30" rx="2" />
                    <rect x="1100" y="165" width="4" height="35" rx="2" />
                </g>

                <!-- Crop tops -->
                <g fill="#228B22">
                    <ellipse cx="102" cy="155" rx="8" ry="5" />
                    <ellipse cx="202" cy="165" rx="6" ry="4" />
                    <ellipse cx="352" cy="160" rx="7" ry="4" />
                    <ellipse cx="502" cy="150" rx="9" ry="6" />
                    <ellipse cx="652" cy="170" rx="5" ry="3" />
                    <ellipse cx="802" cy="155" rx="8" ry="5" />
                    <ellipse cx="952" cy="165" rx="6" ry="4" />
                    <ellipse cx="1102" cy="160" rx="7" ry="4" />
                </g>
            </svg>
        </div>
    </div>

    <!-- Main Content -->
    <div class="relative z-10 min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-md">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="flex justify-center mb-4">
                    <div
                        class="w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-2xl border-4 border-leaf-green">
                        <svg class="w-12 h-12 text-leaf-green" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" />
                            <path
                                d="M12 16C12 18.21 10.21 20 8 20C5.79 20 4 18.21 4 16C4 13.79 5.79 12 8 12C10.21 12 12 13.79 12 16Z" />
                        </svg>
                    </div>
                </div>
                <h1 class="text-4xl font-bold text-earth-brown mb-2">Welcome Back</h1>
                <p class="text-gray-600">Sign in to your farming dashboard</p>
            </div>

            <!-- Login Form Card -->
            <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border border-white/50">
                <!-- User/Admin Toggle -->
                <div class="mb-6">
                    <div class="flex bg-gray-100 rounded-xl p-1">
                        <button id="userTab"
                            class="flex-1 py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center space-x-2 bg-leaf-green text-white shadow-md"
                            onclick="switchLoginType('user')">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                            </svg>
                            <span>User Login</span>
                        </button>
                        <button id="adminTab"
                            class="flex-1 py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-800"
                            onclick="switchLoginType('admin')">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-1 6h2v7h-2V7zm0 8h2v2h-2v-2z" />
                            </svg>
                            <span>Admin Login</span>
                        </button>
                    </div>
                </div>

                <!-- Login Form -->
                <form class="space-y-6" onsubmit="handleLogin(event)">
                    <!-- Email Field -->
                    <div class="relative">
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                            <span class="flex items-center">
                                <svg class="w-4 h-4 mr-2 text-leaf-green" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
                                </svg>
                                Email Address
                            </span>
                        </label>
                        <input type="email" id="email" name="email" required
                            class="w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-leaf-green focus:border-leaf-green transition-all duration-200 bg-gray-50 focus:bg-white text-lg"
                            placeholder="Enter your email">
                    </div>

                    <!-- Password Field -->
                    <div class="relative">
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                            <span class="flex items-center">
                                <svg class="w-4 h-4 mr-2 text-leaf-green" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                                </svg>
                                Password
                            </span>
                        </label>
                        <div class="relative">
                            <input type="password" id="password" name="password" required
                                class="w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-leaf-green focus:border-leaf-green transition-all duration-200 bg-gray-50 focus:bg-white text-lg pr-12"
                                placeholder="Enter your password">
                            <button type="button"
                                class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
                                onclick="togglePassword()">
                                <svg id="eyeIcon" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Remember Me & Forgot Password -->
                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox"
                                class="w-4 h-4 text-leaf-green border-gray-300 rounded focus:ring-leaf-green">
                            <span class="ml-2 text-sm text-gray-600">Remember me</span>
                        </label>
                        <a href="#"
                            class="text-sm text-leaf-green hover:text-earth-brown font-medium transition-colors duration-200">
                            Forgot Password?
                        </a>
                    </div>

                    <!-- Login Button -->
                    <button type="submit"
                        class="w-full bg-leaf-green text-white py-4 px-6 rounded-xl font-semibold text-lg hover:bg-earth-brown transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M10 17l5-5-5-5v10z" />
                        </svg>
                        <span id="loginButtonText">Sign In</span>
                    </button>
                </form>

                <!-- Success Message -->
                <div id="successMessage"
                    class="hidden mt-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-xl">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span id="successText">Login successful! Redirecting to dashboard...</span>
                    </div>
                </div>

                <!-- Register Link -->
                <div class="mt-8 text-center">
                    <p class="text-gray-600">
                        Don't have an account?
                        <a href="register.html"
                            class="text-leaf-green hover:text-earth-brown font-semibold transition-colors duration-200">
                            Create one here
                        </a>
                    </p>
                </div>
            </div>

            <!-- Security Notice -->
            <div class="mt-6 text-center">
                <div class="flex justify-center items-center space-x-4 text-sm text-gray-600">
                    <div class="flex items-center">
                        <svg class="w-4 h-4 mr-1 text-leaf-green" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z" />
                        </svg>
                        Secure Login
                    </div>
                    <div class="flex items-center">
                        <svg class="w-4 h-4 mr-1 text-leaf-green" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        SSL Protected
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLoginType = 'user';

        function switchLoginType(type) {
            currentLoginType = type;
            const userTab = document.getElementById('userTab');
            const adminTab = document.getElementById('adminTab');
            const loginButtonText = document.getElementById('loginButtonText');

            if (type === 'user') {
                userTab.className = 'flex-1 py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center space-x-2 bg-leaf-green text-white shadow-md';
                adminTab.className = 'flex-1 py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-800';
                loginButtonText.textContent = 'Sign In';
            } else {
                adminTab.className = 'flex-1 py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center space-x-2 bg-earth-brown text-white shadow-md';
                userTab.className = 'flex-1 py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-800';
                loginButtonText.textContent = 'Admin Sign In';
            }
        }

        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = '<path d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"/>';
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = '<path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>';
            }
        }

        function handleLogin(event) {
            event.preventDefault();

            const formData = new FormData(event.target);
            const email = formData.get('email');
            const password = formData.get('password');

            // Show success message
            const successMessage = document.getElementById('successMessage');
            const successText = document.getElementById('successText');

            if (currentLoginType === 'admin') {
                successText.textContent = 'Admin login successful! Redirecting to admin dashboard...';
            } else {
                successText.textContent = 'Login successful! Redirecting to dashboard...';
            }

            successMessage.classList.remove('hidden');

            // Simulate redirect after 2 seconds
            setTimeout(() => {
                successMessage.classList.add('hidden');
                // In a real app, you would redirect here
                console.log(`${currentLoginType} login successful for ${email}`);
            }, 2000);
        }

        // Add some interactive animations
        document.addEventListener('DOMContentLoaded', function () {
            // Add floating animation to background elements
            const particles = document.querySelectorAll('.animate-bounce');
            particles.forEach((particle, index) => {
                particle.style.animationDuration = `${2 + index * 0.5}s`;
            });
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'95a0b3d3f77159dc',t:'MTc1MTY1MzkxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>

    <script type="module">
        import { auth, db } from './js/firebase-config.js';

        // Example: simple console test
        console.log('Firebase Auth:', auth);
        console.log('Firebase Firestore:', db);
    </script>

    <script type="module">
        import { handleRegistration, handleLogin } from './js/auth.js';
        window.handleRegistration = handleRegistration;
        window.handleLogin = handleLogin;
    </script>

</body>

</html>